["1e842b3629137596b6f7906fbd242544153dd952","dcd34d28eb38ac083d6d694d30fd1fb444d71c2f",["react-native","uuid-js","regenerator-runtime"],[611,651,758],{"version":3,"sources":["/TryOut/node_modules/expo/src/FileSystem.js"],"names":["getInfoAsync","readAsStringAsync","writeAsStringAsync","deleteAsync","moveAsync","copyAsync","makeDirectoryAsync","readDirectoryAsync","downloadAsync","createDownloadResumable","FS","ExponentFileSystem","normalizeEndingSlash","p","replace","documentDirectory","cacheDirectory","fileUri","options","contents","uri","url","callback","resumeData","DownloadResumable","_uuid","create","toString","_url","_fileUri","_options","_resumeData","_callBack","_subscription","_emitter","_addSubscription","downloadResumableStartAsync","downloadResumablePauseAsync","pauseResult","addListener","uuid","data"],"mappings":"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","sourcesContent":["// @flow\n\nimport { NativeModules, NativeEventEmitter } from 'react-native';\nimport UUIDjs from 'uuid-js';\n\nconst { ExponentFileSystem: FS } = NativeModules;\n\nconst normalizeEndingSlash = p => p.replace(/\\/*$/, '') + '/';\n\nFS.documentDirectory = normalizeEndingSlash(FS.documentDirectory);\nFS.cacheDirectory = normalizeEndingSlash(FS.cacheDirectory);\n\nexport const documentDirectory = FS.documentDirectory;\nexport const cacheDirectory = FS.cacheDirectory;\n\nexport function getInfoAsync(fileUri, options = {}) {\n  return FS.getInfoAsync(fileUri, options);\n}\n\nexport function readAsStringAsync(fileUri) {\n  return FS.readAsStringAsync(fileUri, {});\n}\n\nexport function writeAsStringAsync(fileUri, contents) {\n  return FS.writeAsStringAsync(fileUri, contents, {});\n}\n\nexport function deleteAsync(fileUri, options = {}) {\n  return FS.deleteAsync(fileUri, options);\n}\n\nexport function moveAsync(options) {\n  return FS.moveAsync(options);\n}\n\nexport function copyAsync(options) {\n  return FS.copyAsync(options);\n}\n\nexport function makeDirectoryAsync(fileUri, options = {}) {\n  return FS.makeDirectoryAsync(fileUri, options);\n}\n\nexport function readDirectoryAsync(fileUri) {\n  return FS.readDirectoryAsync(fileUri, {});\n}\n\nexport function downloadAsync(uri, fileUri, options = {}) {\n  return FS.downloadAsync(uri, fileUri, options);\n}\n\nexport function createDownloadResumable(\n  url,\n  fileUri,\n  options = {},\n  callback = null,\n  resumeData = null\n) {\n  return new DownloadResumable(url, fileUri, options, callback, resumeData);\n}\n\ntype DownloadProgressCallback = (data: DownloadProgressData) => any;\ntype DownloadProgressData = {\n  totalBytesWritten: number,\n  totalBytesExpectedToWrite: number,\n};\n\nexport class DownloadResumable {\n  _uuid: string;\n  _url: string;\n  _fileUri: string;\n  _options: object;\n  _resumeData: string;\n  _callBack: ?DownloadProgressCallback;\n  _subscription: ?Function;\n  _emitter: NativeEventEmitter;\n\n  constructor(url, fileUri, options = {}, callback, resumeData) {\n    this._uuid = UUIDjs.create(4).toString();\n    this._url = url;\n    this._fileUri = fileUri;\n    this._options = options;\n    this._resumeData = resumeData;\n    this._callBack = callback;\n    this._subscription = null;\n    this._emitter = new NativeEventEmitter(FS);\n  }\n\n  async downloadAsync() {\n    this._addSubscription();\n    return await FS.downloadResumableStartAsync(\n      this._url,\n      this._fileUri,\n      this._uuid,\n      this._options,\n      this._resumeData\n    );\n  }\n\n  async pauseAsync() {\n    const pauseResult = await FS.downloadResumablePauseAsync(this._uuid);\n    this._resumeData = pauseResult.resumeData;\n    return pauseResult;\n  }\n\n  async resumeAsync() {\n    this._addSubscription();\n    return await FS.downloadResumableStartAsync(\n      this._url,\n      this._fileUri,\n      this._uuid,\n      this._options,\n      this._resumeData\n    );\n  }\n\n  savable() {\n    return {\n      url: this._url,\n      fileUri: this._fileUri,\n      options: this._options,\n      resumeData: this._resumeData,\n    };\n  }\n\n  _addSubscription() {\n    if (!this._subscription) {\n      this._subscription = this._emitter.addListener(\n        'Exponent.downloadProgress',\n        ({ uuid, data }) => {\n          const callback = this._callBack;\n          if (callback) {\n            callback(data);\n          }\n        }\n      );\n    }\n  }\n}\n"]}]