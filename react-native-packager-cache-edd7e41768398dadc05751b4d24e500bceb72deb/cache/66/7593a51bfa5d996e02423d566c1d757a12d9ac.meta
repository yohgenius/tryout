["d1f84e6e37d0d4be3c05ebafcdd2a35b379134e9","7c5d49de87127c39e793f96a5d7e0aed33e9cf50",["InteractionManager","Interpolation","NativeAnimatedHelper","React","ReactNative","Set","SpringConfig","ViewStylePropTypes","flattenStyle","fbjs/lib/invariant","fbjs/lib/requestAnimationFrame","Easing"],[49,100,153,198,234,268,303,353,404,445,504,7027],{"version":3,"sources":["/TryOut/node_modules/react-native/Libraries/Animated/src/AnimatedImplementation.js"],"names":["InteractionManager","require","Interpolation","NativeAnimatedHelper","React","ReactNative","Set","SpringConfig","ViewStylePropTypes","flattenStyle","invariant","requestAnimationFrame","NativeAnimatedAPI","API","warnedMissingNativeAnimated","shouldUseNativeDriver","config","useNativeDriver","isNativeAnimatedAvailable","console","warn","Animated","__isNative","__nativeTag","dropAnimatedNode","undefined","__getValue","child","Error","assertNativeAnimatedModule","nativeTag","generateNewNodeTag","createAnimatedNode","__getNativeConfig","Animation","fromValue","onUpdate","onEnd","previousAnimation","animatedValue","__nativeId","stopAnimation","result","__onEnd","__makeNative","generateNewAnimationId","startAnimatingNode","__getNativeTag","__getNativeAnimationConfig","__debouncedOnEnd","bind","AnimatedWithChildren","_children","connectAnimatedNodes","length","__attach","push","index","indexOf","disconnectAnimatedNodes","splice","__detach","_flush","rootNode","animatedStyles","findAnimatedStyles","node","update","add","__getChildren","forEach","animatedStyle","_easeInOut","easeInOut","Easing","inOut","ease","TimingAnimation","_toValue","toValue","_easing","easing","_duration","duration","_delay","delay","__iterations","iterations","__isInteraction","isInteraction","_useNativeDriver","frameDuration","frames","dt","type","__active","_fromValue","_onUpdate","start","finished","_startTime","Date","now","__startNativeAnimation","_animationFrame","_timeout","setTimeout","clearTimeout","global","cancelAnimationFrame","DecayAnimation","_deceleration","deceleration","_velocity","velocity","_lastValue","value","Math","exp","abs","withDefault","defaultValue","SpringAnimation","_overshootClamping","overshootClamping","_restDisplacementThreshold","restDisplacementThreshold","_restSpeedThreshold","restSpeedThreshold","_initialVelocity","_lastVelocity","springConfig","bounciness","speed","tension","friction","fromBouncinessAndSpeed","fromOrigamiTensionAndFriction","_tension","_friction","initialVelocity","_startPosition","_lastPosition","_lastTime","internalState","getInternalState","lastPosition","lastVelocity","lastTime","position","tempPosition","tempVelocity","MAX_STEPS","TIMESTEP_MSEC","numSteps","floor","i","step","aVelocity","aAcceleration","bVelocity","bAcceleration","cVelocity","cAcceleration","dVelocity","dAcceleration","dxdt","dvdt","isOvershooting","isVelocity","isDisplacement","_uniqueId","AnimatedValue","_startingValue","_value","_offset","_animation","_listeners","Object","keys","_startListeningToNativeValueUpdates","stop","_updateValue","setAnimatedNodeValue","offset","setAnimatedNodeOffset","flattenAnimatedNodeOffset","extractAnimatedNodeOffset","callback","id","String","_stopListeningForNativeValueUpdates","__nativeAnimatedValueListener","startListeningToAnimatedNodeValue","nativeEventEmitter","addListener","data","tag","remove","stopListeningToAnimatedNodeValue","stopTracking","AnimatedInterpolation","animation","handle","createInteractionHandle","clearInteractionHandle","_tracking","tracking","flush","key","AnimatedValueXY","valueIn","x","y","setValue","setOffset","flattenOffset","extractOffset","resetAnimation","jointCallback","number","removeListener","removeAllListeners","left","top","translateX","translateY","parent","_parent","_config","_interpolation","create","parentValue","__addChild","__removeChild","range","map","test","degrees","parseFloat","radians","PI","__DEV__","validateInterpolation","inputRange","outputRange","__transformDataType","extrapolateLeft","extrapolate","extrapolateRight","AnimatedAddition","a","b","_a","_b","input","AnimatedDivision","error","AnimatedMultiplication","AnimatedModulo","modulus","_modulus","AnimatedDiffClamp","min","max","_min","_max","diff","AnimatedTransform","transforms","_transforms","transform","__getAnimatedValue","transConfigs","property","nodeTag","validateTransform","AnimatedStyle","style","_style","updatedStyle","Array","isArray","__walkStyleAndGetValues","__walkStyleAndGetAnimatedValues","styleConfig","styleKey","validateStyles","AnimatedProps","props","_props","_callback","AnimatedEvent","__getHandler","_animatedView","__disconnectAnimatedView","__connectAnimatedView","animatedView","nativeViewTag","findNodeHandle","connectAnimatedNodeToView","disconnectAnimatedNodeFromView","propsConfig","propKey","createAnimatedComponent","Component","AnimatedComponent","_eventDetachers","_setComponentRef","_propsAnimated","_detachNativeEvents","_component","setNativeProps","_attachProps","setNativeView","_attachNativeEvents","scrollableNode","getScrollableNode","prop","nextProps","oldPropsAnimated","forceUpdate","newProps","prevProps","_prevComponent","collapsable","c","propTypes","__propTypesSecretDontUseThesePlease","propName","componentName","AnimatedTracking","animationClass","animationConfig","_animationClass","_animationConfig","animate","divide","multiply","modulo","diffClamp","_combineCallbacks","onComplete","maybeVectorAnim","anim","configX","configY","aX","aY","parallel","stopTogether","spring","configuration","singleValue","singleConfig","track","reset","_startNativeLoop","_isUsingNativeDriver","timing","decay","sequence","animations","current","idx","doneCount","hasEnded","cb","endResult","time","stagger","loop","isFinished","iterationsSoFar","restart","attachNativeEvent","viewRef","eventName","argMapping","eventMappings","traverse","path","nativeEventPath","animatedValueTag","concat","nativeEvent","viewTag","mapping","addAnimatedEventToView","detach","removeAnimatedEventFromView","forkEvent","event","listener","__addListener","unforkEvent","__removeListener","_argMapping","_callListeners","_attachedEvent","_validateMapping","filter","args","recMapping","recEvt","mappingKey","animatedEvent","module","exports","Value","ValueXY","__PropsOnlyForTests"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule AnimatedImplementation\n * @flow\n * @preventMunge\n */\n'use strict';\n\nvar InteractionManager = require('InteractionManager');\nvar Interpolation = require('Interpolation');\nvar NativeAnimatedHelper = require('NativeAnimatedHelper');\nvar React = require('React');\nvar ReactNative = require('ReactNative');\nvar Set = require('Set');\nvar SpringConfig = require('SpringConfig');\nvar ViewStylePropTypes = require('ViewStylePropTypes');\n\nvar flattenStyle = require('flattenStyle');\nvar invariant = require('fbjs/lib/invariant');\nvar requestAnimationFrame = require('fbjs/lib/requestAnimationFrame');\n\nimport type { InterpolationConfigType } from 'Interpolation';\n\ntype EndResult = {finished: bool};\ntype EndCallback = (result: EndResult) => void;\n\nvar NativeAnimatedAPI = NativeAnimatedHelper.API;\n\nvar warnedMissingNativeAnimated = false;\n\nfunction shouldUseNativeDriver(config: AnimationConfig | EventConfig): boolean {\n  if (config.useNativeDriver &&\n      !NativeAnimatedHelper.isNativeAnimatedAvailable()) {\n    if (!warnedMissingNativeAnimated) {\n      console.warn(\n        'Animated: `useNativeDriver` is not supported because the native ' +\n        'animated module is missing. Falling back to JS-based animation. To ' +\n        'resolve this, add `RCTAnimation` module to this app, or remove ' +\n        '`useNativeDriver`. ' +\n        'More info: https://github.com/facebook/react-native/issues/11094#issuecomment-263240420'\n      );\n      warnedMissingNativeAnimated = true;\n    }\n    return false;\n  }\n\n  return config.useNativeDriver || false;\n}\n\n// Note(vjeux): this would be better as an interface but flow doesn't\n// support them yet\nclass Animated {\n  __attach(): void {}\n  __detach(): void {\n    if (this.__isNative && this.__nativeTag != null) {\n      NativeAnimatedAPI.dropAnimatedNode(this.__nativeTag);\n      this.__nativeTag = undefined;\n    }\n  }\n  __getValue(): any {}\n  __getAnimatedValue(): any { return this.__getValue(); }\n  __addChild(child: Animated) {}\n  __removeChild(child: Animated) {}\n  __getChildren(): Array<Animated> { return []; }\n\n  /* Methods and props used by native Animated impl */\n  __isNative: bool;\n  __nativeTag: ?number;\n  __makeNative() {\n    if (!this.__isNative) {\n      throw new Error('This node cannot be made a \"native\" animated node');\n    }\n  }\n  __getNativeTag(): ?number {\n    NativeAnimatedHelper.assertNativeAnimatedModule();\n    invariant(this.__isNative, 'Attempt to get native tag from node not marked as \"native\"');\n    if (this.__nativeTag == null) {\n      var nativeTag: ?number = NativeAnimatedHelper.generateNewNodeTag();\n      NativeAnimatedAPI.createAnimatedNode(nativeTag, this.__getNativeConfig());\n      this.__nativeTag = nativeTag;\n    }\n    return this.__nativeTag;\n  }\n  __getNativeConfig(): Object {\n    throw new Error('This JS animated node type cannot be used as native animated node');\n  }\n  toJSON(): any { return this.__getValue(); }\n}\n\ntype AnimationConfig = {\n  isInteraction?: bool,\n  useNativeDriver?: bool,\n  onComplete?: ?EndCallback,\n  iterations?: number,\n};\n\n// Important note: start() and stop() will only be called at most once.\n// Once an animation has been stopped or finished its course, it will\n// not be reused.\nclass Animation {\n  __active: bool;\n  __isInteraction: bool;\n  __nativeId: number;\n  __onEnd: ?EndCallback;\n  __iterations: number;\n  start(\n    fromValue: number,\n    onUpdate: (value: number) => void,\n    onEnd: ?EndCallback,\n    previousAnimation: ?Animation,\n    animatedValue: AnimatedValue\n  ): void {}\n  stop(): void {\n    if (this.__nativeId) {\n      NativeAnimatedAPI.stopAnimation(this.__nativeId);\n    }\n  }\n  __getNativeAnimationConfig(): any {\n    // Subclasses that have corresponding animation implementation done in native\n    // should override this method\n    throw new Error('This animation type cannot be offloaded to native');\n  }\n  // Helper function for subclasses to make sure onEnd is only called once.\n  __debouncedOnEnd(result: EndResult): void {\n    var onEnd = this.__onEnd;\n    this.__onEnd = null;\n    onEnd && onEnd(result);\n  }\n  __startNativeAnimation(animatedValue: AnimatedValue): void {\n    animatedValue.__makeNative();\n    this.__nativeId = NativeAnimatedHelper.generateNewAnimationId();\n    NativeAnimatedAPI.startAnimatingNode(\n      this.__nativeId,\n      animatedValue.__getNativeTag(),\n      this.__getNativeAnimationConfig(),\n      this.__debouncedOnEnd.bind(this)\n    );\n  }\n}\n\nclass AnimatedWithChildren extends Animated {\n  _children: Array<Animated>;\n\n  constructor() {\n    super();\n    this._children = [];\n  }\n\n  __makeNative() {\n    if (!this.__isNative) {\n      this.__isNative = true;\n      for (var child of this._children) {\n        child.__makeNative();\n        NativeAnimatedAPI.connectAnimatedNodes(this.__getNativeTag(), child.__getNativeTag());\n      }\n    }\n  }\n\n  __addChild(child: Animated): void {\n    if (this._children.length === 0) {\n      this.__attach();\n    }\n    this._children.push(child);\n    if (this.__isNative) {\n      // Only accept \"native\" animated nodes as children\n      child.__makeNative();\n      NativeAnimatedAPI.connectAnimatedNodes(this.__getNativeTag(), child.__getNativeTag());\n    }\n  }\n\n  __removeChild(child: Animated): void {\n    var index = this._children.indexOf(child);\n    if (index === -1) {\n      console.warn('Trying to remove a child that doesn\\'t exist');\n      return;\n    }\n    if (this.__isNative && child.__isNative) {\n      NativeAnimatedAPI.disconnectAnimatedNodes(this.__getNativeTag(), child.__getNativeTag());\n    }\n    this._children.splice(index, 1);\n    if (this._children.length === 0) {\n      this.__detach();\n    }\n  }\n\n  __getChildren(): Array<Animated> {\n    return this._children;\n  }\n}\n\n/**\n * Animated works by building a directed acyclic graph of dependencies\n * transparently when you render your Animated components.\n *\n *               new Animated.Value(0)\n *     .interpolate()        .interpolate()    new Animated.Value(1)\n *         opacity               translateY      scale\n *          style                         transform\n *         View#234                         style\n *                                         View#123\n *\n * A) Top Down phase\n * When an Animated.Value is updated, we recursively go down through this\n * graph in order to find leaf nodes: the views that we flag as needing\n * an update.\n *\n * B) Bottom Up phase\n * When a view is flagged as needing an update, we recursively go back up\n * in order to build the new value that it needs. The reason why we need\n * this two-phases process is to deal with composite props such as\n * transform which can receive values from multiple parents.\n */\nfunction _flush(rootNode: AnimatedValue): void {\n  var animatedStyles = new Set();\n  function findAnimatedStyles(node) {\n    if (typeof node.update === 'function') {\n      animatedStyles.add(node);\n    } else {\n      node.__getChildren().forEach(findAnimatedStyles);\n    }\n  }\n  findAnimatedStyles(rootNode);\n  /* $FlowFixMe */\n  animatedStyles.forEach(animatedStyle => animatedStyle.update());\n}\n\ntype TimingAnimationConfig = AnimationConfig & {\n  toValue: number | AnimatedValue | {x: number, y: number} | AnimatedValueXY,\n  easing?: (value: number) => number,\n  duration?: number,\n  delay?: number,\n};\n\ntype TimingAnimationConfigSingle = AnimationConfig & {\n  toValue: number | AnimatedValue,\n  easing?: (value: number) => number,\n  duration?: number,\n  delay?: number,\n};\n\nlet _easeInOut;\nfunction easeInOut() {\n  if (!_easeInOut) {\n    const Easing = require('Easing');\n    _easeInOut = Easing.inOut(Easing.ease);\n  }\n  return _easeInOut;\n}\n\nclass TimingAnimation extends Animation {\n  _startTime: number;\n  _fromValue: number;\n  _toValue: any;\n  _duration: number;\n  _delay: number;\n  _easing: (value: number) => number;\n  _onUpdate: (value: number) => void;\n  _animationFrame: any;\n  _timeout: any;\n  _useNativeDriver: bool;\n\n  constructor(\n    config: TimingAnimationConfigSingle,\n  ) {\n    super();\n    this._toValue = config.toValue;\n    this._easing = config.easing !== undefined ? config.easing : easeInOut();\n    this._duration = config.duration !== undefined ? config.duration : 500;\n    this._delay = config.delay !== undefined ? config.delay : 0;\n    this.__iterations = config.iterations !== undefined ? config.iterations : 1;\n    this.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    this._useNativeDriver = shouldUseNativeDriver(config);\n  }\n\n  __getNativeAnimationConfig(): any {\n    var frameDuration = 1000.0 / 60.0;\n    var frames = [];\n    for (var dt = 0.0; dt < this._duration; dt += frameDuration) {\n      frames.push(this._easing(dt / this._duration));\n    }\n    frames.push(this._easing(1));\n    return {\n      type: 'frames',\n      frames,\n      toValue: this._toValue,\n      iterations: this.__iterations,\n    };\n  }\n\n  start(\n    fromValue: number,\n    onUpdate: (value: number) => void,\n    onEnd: ?EndCallback,\n    previousAnimation: ?Animation,\n    animatedValue: AnimatedValue\n  ): void {\n    this.__active = true;\n    this._fromValue = fromValue;\n    this._onUpdate = onUpdate;\n    this.__onEnd = onEnd;\n\n    var start = () => {\n      // Animations that sometimes have 0 duration and sometimes do not\n      // still need to use the native driver when duration is 0 so as to\n      // not cause intermixed JS and native animations.\n      if (this._duration === 0 && !this._useNativeDriver) {\n        this._onUpdate(this._toValue);\n        this.__debouncedOnEnd({finished: true});\n      } else {\n        this._startTime = Date.now();\n        if (this._useNativeDriver) {\n          this.__startNativeAnimation(animatedValue);\n        } else {\n          this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n        }\n      }\n    };\n    if (this._delay) {\n      this._timeout = setTimeout(start, this._delay);\n    } else {\n      start();\n    }\n  }\n\n  onUpdate(): void {\n    var now = Date.now();\n    if (now >= this._startTime + this._duration) {\n      if (this._duration === 0) {\n        this._onUpdate(this._toValue);\n      } else {\n        this._onUpdate(\n          this._fromValue + this._easing(1) * (this._toValue - this._fromValue)\n        );\n      }\n      this.__debouncedOnEnd({finished: true});\n      return;\n    }\n\n    this._onUpdate(\n      this._fromValue +\n        this._easing((now - this._startTime) / this._duration) *\n        (this._toValue - this._fromValue)\n    );\n    if (this.__active) {\n      this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n    }\n  }\n\n  stop(): void {\n    super.stop();\n    this.__active = false;\n    clearTimeout(this._timeout);\n    global.cancelAnimationFrame(this._animationFrame);\n    this.__debouncedOnEnd({finished: false});\n  }\n}\n\ntype DecayAnimationConfig = AnimationConfig & {\n  velocity: number | {x: number, y: number},\n  deceleration?: number,\n};\n\ntype DecayAnimationConfigSingle = AnimationConfig & {\n  velocity: number,\n  deceleration?: number,\n};\n\nclass DecayAnimation extends Animation {\n  _startTime: number;\n  _lastValue: number;\n  _fromValue: number;\n  _deceleration: number;\n  _velocity: number;\n  _onUpdate: (value: number) => void;\n  _animationFrame: any;\n  _useNativeDriver: bool;\n\n  constructor(\n    config: DecayAnimationConfigSingle,\n  ) {\n    super();\n    this._deceleration = config.deceleration !== undefined ? config.deceleration : 0.998;\n    this._velocity = config.velocity;\n    this._useNativeDriver = shouldUseNativeDriver(config);\n    this.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    this.__iterations = config.iterations !== undefined ? config.iterations : 1;\n  }\n\n  __getNativeAnimationConfig() {\n    return {\n      type: 'decay',\n      deceleration: this._deceleration,\n      velocity: this._velocity,\n      iterations: this.__iterations,\n    };\n  }\n\n  start(\n    fromValue: number,\n    onUpdate: (value: number) => void,\n    onEnd: ?EndCallback,\n    previousAnimation: ?Animation,\n    animatedValue: AnimatedValue,\n  ): void {\n    this.__active = true;\n    this._lastValue = fromValue;\n    this._fromValue = fromValue;\n    this._onUpdate = onUpdate;\n    this.__onEnd = onEnd;\n    this._startTime = Date.now();\n    if (this._useNativeDriver) {\n      this.__startNativeAnimation(animatedValue);\n    } else {\n      this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n    }\n  }\n\n  onUpdate(): void {\n    var now = Date.now();\n\n    var value = this._fromValue +\n      (this._velocity / (1 - this._deceleration)) *\n      (1 - Math.exp(-(1 - this._deceleration) * (now - this._startTime)));\n\n    this._onUpdate(value);\n\n    if (Math.abs(this._lastValue - value) < 0.1) {\n      this.__debouncedOnEnd({finished: true});\n      return;\n    }\n\n    this._lastValue = value;\n    if (this.__active) {\n      this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n    }\n  }\n\n  stop(): void {\n    super.stop();\n    this.__active = false;\n    global.cancelAnimationFrame(this._animationFrame);\n    this.__debouncedOnEnd({finished: false});\n  }\n}\n\ntype SpringAnimationConfig = AnimationConfig & {\n  toValue: number | AnimatedValue | {x: number, y: number} | AnimatedValueXY,\n  overshootClamping?: bool,\n  restDisplacementThreshold?: number,\n  restSpeedThreshold?: number,\n  velocity?: number | {x: number, y: number},\n  bounciness?: number,\n  speed?: number,\n  tension?: number,\n  friction?: number,\n};\n\ntype SpringAnimationConfigSingle = AnimationConfig & {\n  toValue: number | AnimatedValue,\n  overshootClamping?: bool,\n  restDisplacementThreshold?: number,\n  restSpeedThreshold?: number,\n  velocity?: number,\n  bounciness?: number,\n  speed?: number,\n  tension?: number,\n  friction?: number,\n};\n\nfunction withDefault<T>(value: ?T, defaultValue: T): T {\n  if (value === undefined || value === null) {\n    return defaultValue;\n  }\n  return value;\n}\n\nclass SpringAnimation extends Animation {\n  _overshootClamping: bool;\n  _restDisplacementThreshold: number;\n  _restSpeedThreshold: number;\n  _initialVelocity: ?number;\n  _lastVelocity: number;\n  _startPosition: number;\n  _lastPosition: number;\n  _fromValue: number;\n  _toValue: any;\n  _tension: number;\n  _friction: number;\n  _lastTime: number;\n  _onUpdate: (value: number) => void;\n  _animationFrame: any;\n  _useNativeDriver: bool;\n\n  constructor(\n    config: SpringAnimationConfigSingle,\n  ) {\n    super();\n\n    this._overshootClamping = withDefault(config.overshootClamping, false);\n    this._restDisplacementThreshold = withDefault(config.restDisplacementThreshold, 0.001);\n    this._restSpeedThreshold = withDefault(config.restSpeedThreshold, 0.001);\n    this._initialVelocity = config.velocity;\n    this._lastVelocity = withDefault(config.velocity, 0);\n    this._toValue = config.toValue;\n    this._useNativeDriver = shouldUseNativeDriver(config);\n    this.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    this.__iterations = config.iterations !== undefined ? config.iterations : 1;\n\n    var springConfig;\n    if (config.bounciness !== undefined || config.speed !== undefined) {\n      invariant(\n        config.tension === undefined && config.friction === undefined,\n        'You can only define bounciness/speed or tension/friction but not both',\n      );\n      springConfig = SpringConfig.fromBouncinessAndSpeed(\n        withDefault(config.bounciness, 8),\n        withDefault(config.speed, 12),\n      );\n    } else {\n      springConfig = SpringConfig.fromOrigamiTensionAndFriction(\n        withDefault(config.tension, 40),\n        withDefault(config.friction, 7),\n      );\n    }\n    this._tension = springConfig.tension;\n    this._friction = springConfig.friction;\n  }\n\n  __getNativeAnimationConfig() {\n    return {\n      type: 'spring',\n      overshootClamping: this._overshootClamping,\n      restDisplacementThreshold: this._restDisplacementThreshold,\n      restSpeedThreshold: this._restSpeedThreshold,\n      tension: this._tension,\n      friction: this._friction,\n      initialVelocity: withDefault(this._initialVelocity, this._lastVelocity),\n      toValue: this._toValue,\n      iterations: this.__iterations,\n    };\n  }\n\n  start(\n    fromValue: number,\n    onUpdate: (value: number) => void,\n    onEnd: ?EndCallback,\n    previousAnimation: ?Animation,\n    animatedValue: AnimatedValue\n  ): void {\n    this.__active = true;\n    this._startPosition = fromValue;\n    this._lastPosition = this._startPosition;\n\n    this._onUpdate = onUpdate;\n    this.__onEnd = onEnd;\n    this._lastTime = Date.now();\n\n    if (previousAnimation instanceof SpringAnimation) {\n      var internalState = previousAnimation.getInternalState();\n      this._lastPosition = internalState.lastPosition;\n      this._lastVelocity = internalState.lastVelocity;\n      this._lastTime = internalState.lastTime;\n    }\n    if (this._initialVelocity !== undefined &&\n        this._initialVelocity !== null) {\n      this._lastVelocity = this._initialVelocity;\n    }\n    if (this._useNativeDriver) {\n      this.__startNativeAnimation(animatedValue);\n    } else {\n      this.onUpdate();\n    }\n  }\n\n  getInternalState(): Object {\n    return {\n      lastPosition: this._lastPosition,\n      lastVelocity: this._lastVelocity,\n      lastTime: this._lastTime,\n    };\n  }\n\n  onUpdate(): void {\n    var position = this._lastPosition;\n    var velocity = this._lastVelocity;\n\n    var tempPosition = this._lastPosition;\n    var tempVelocity = this._lastVelocity;\n\n    // If for some reason we lost a lot of frames (e.g. process large payload or\n    // stopped in the debugger), we only advance by 4 frames worth of\n    // computation and will continue on the next frame. It's better to have it\n    // running at faster speed than jumping to the end.\n    var MAX_STEPS = 64;\n    var now = Date.now();\n    if (now > this._lastTime + MAX_STEPS) {\n      now = this._lastTime + MAX_STEPS;\n    }\n\n    // We are using a fixed time step and a maximum number of iterations.\n    // The following post provides a lot of thoughts into how to build this\n    // loop: http://gafferongames.com/game-physics/fix-your-timestep/\n    var TIMESTEP_MSEC = 1;\n    var numSteps = Math.floor((now - this._lastTime) / TIMESTEP_MSEC);\n\n    for (var i = 0; i < numSteps; ++i) {\n      // Velocity is based on seconds instead of milliseconds\n      var step = TIMESTEP_MSEC / 1000;\n\n      // This is using RK4. A good blog post to understand how it works:\n      // http://gafferongames.com/game-physics/integration-basics/\n      var aVelocity = velocity;\n      var aAcceleration = this._tension *\n        (this._toValue - tempPosition) - this._friction * tempVelocity;\n      var tempPosition = position + aVelocity * step / 2;\n      var tempVelocity = velocity + aAcceleration * step / 2;\n\n      var bVelocity = tempVelocity;\n      var bAcceleration = this._tension *\n        (this._toValue - tempPosition) - this._friction * tempVelocity;\n      tempPosition = position + bVelocity * step / 2;\n      tempVelocity = velocity + bAcceleration * step / 2;\n\n      var cVelocity = tempVelocity;\n      var cAcceleration = this._tension *\n        (this._toValue - tempPosition) - this._friction * tempVelocity;\n      tempPosition = position + cVelocity * step / 2;\n      tempVelocity = velocity + cAcceleration * step / 2;\n\n      var dVelocity = tempVelocity;\n      var dAcceleration = this._tension *\n        (this._toValue - tempPosition) - this._friction * tempVelocity;\n      tempPosition = position + cVelocity * step / 2;\n      tempVelocity = velocity + cAcceleration * step / 2;\n\n      var dxdt = (aVelocity + 2 * (bVelocity + cVelocity) + dVelocity) / 6;\n      var dvdt = (aAcceleration + 2 * (bAcceleration + cAcceleration) + dAcceleration) / 6;\n\n      position += dxdt * step;\n      velocity += dvdt * step;\n    }\n\n    this._lastTime = now;\n    this._lastPosition = position;\n    this._lastVelocity = velocity;\n\n    this._onUpdate(position);\n    if (!this.__active) { // a listener might have stopped us in _onUpdate\n      return;\n    }\n\n    // Conditions for stopping the spring animation\n    var isOvershooting = false;\n    if (this._overshootClamping && this._tension !== 0) {\n      if (this._startPosition < this._toValue) {\n        isOvershooting = position > this._toValue;\n      } else {\n        isOvershooting = position < this._toValue;\n      }\n    }\n    var isVelocity = Math.abs(velocity) <= this._restSpeedThreshold;\n    var isDisplacement = true;\n    if (this._tension !== 0) {\n      isDisplacement = Math.abs(this._toValue - position) <= this._restDisplacementThreshold;\n    }\n\n    if (isOvershooting || (isVelocity && isDisplacement)) {\n      if (this._tension !== 0) {\n        // Ensure that we end up with a round value\n        this._onUpdate(this._toValue);\n      }\n\n      this.__debouncedOnEnd({finished: true});\n      return;\n    }\n    this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n  }\n\n  stop(): void {\n    super.stop();\n    this.__active = false;\n    global.cancelAnimationFrame(this._animationFrame);\n    this.__debouncedOnEnd({finished: false});\n  }\n}\n\ntype ValueListenerCallback = (state: {value: number}) => void;\n\nvar _uniqueId = 1;\n\n/**\n * Standard value for driving animations.  One `Animated.Value` can drive\n * multiple properties in a synchronized fashion, but can only be driven by one\n * mechanism at a time.  Using a new mechanism (e.g. starting a new animation,\n * or calling `setValue`) will stop any previous ones.\n */\nclass AnimatedValue extends AnimatedWithChildren {\n  _value: number;\n  _startingValue: number;\n  _offset: number;\n  _animation: ?Animation;\n  _tracking: ?Animated;\n  _listeners: {[key: string]: ValueListenerCallback};\n  __nativeAnimatedValueListener: ?any;\n\n  constructor(value: number) {\n    super();\n    this._startingValue = this._value = value;\n    this._offset = 0;\n    this._animation = null;\n    this._listeners = {};\n  }\n\n  __detach() {\n    this.stopAnimation();\n    super.__detach();\n  }\n\n  __getValue(): number {\n    return this._value + this._offset;\n  }\n\n  __makeNative() {\n    super.__makeNative();\n\n    if (Object.keys(this._listeners).length) {\n      this._startListeningToNativeValueUpdates();\n    }\n  }\n\n  /**\n   * Directly set the value.  This will stop any animations running on the value\n   * and update all the bound properties.\n   */\n  setValue(value: number): void {\n    if (this._animation) {\n      this._animation.stop();\n      this._animation = null;\n    }\n    this._updateValue(\n      value,\n      !this.__isNative /* don't perform a flush for natively driven values */);\n    if (this.__isNative) {\n      NativeAnimatedAPI.setAnimatedNodeValue(this.__getNativeTag(), value);\n    }\n  }\n\n  /**\n   * Sets an offset that is applied on top of whatever value is set, whether via\n   * `setValue`, an animation, or `Animated.event`.  Useful for compensating\n   * things like the start of a pan gesture.\n   */\n  setOffset(offset: number): void {\n    this._offset = offset;\n    if (this.__isNative) {\n      NativeAnimatedAPI.setAnimatedNodeOffset(this.__getNativeTag(), offset);\n    }\n  }\n\n  /**\n   * Merges the offset value into the base value and resets the offset to zero.\n   * The final output of the value is unchanged.\n   */\n  flattenOffset(): void {\n    this._value += this._offset;\n    this._offset = 0;\n    if (this.__isNative) {\n      NativeAnimatedAPI.flattenAnimatedNodeOffset(this.__getNativeTag());\n    }\n  }\n\n  /**\n   * Sets the offset value to the base value, and resets the base value to zero.\n   * The final output of the value is unchanged.\n   */\n  extractOffset(): void {\n    this._offset += this._value;\n    this._value = 0;\n    if (this.__isNative) {\n      NativeAnimatedAPI.extractAnimatedNodeOffset(this.__getNativeTag());\n    }\n  }\n\n  /**\n   * Adds an asynchronous listener to the value so you can observe updates from\n   * animations.  This is useful because there is no way to\n   * synchronously read the value because it might be driven natively.\n   */\n  addListener(callback: ValueListenerCallback): string {\n    var id = String(_uniqueId++);\n    this._listeners[id] = callback;\n    if (this.__isNative) {\n      this._startListeningToNativeValueUpdates();\n    }\n    return id;\n  }\n\n  removeListener(id: string): void {\n    delete this._listeners[id];\n    if (this.__isNative && Object.keys(this._listeners).length === 0) {\n      this._stopListeningForNativeValueUpdates();\n    }\n  }\n\n  removeAllListeners(): void {\n    this._listeners = {};\n    if (this.__isNative) {\n      this._stopListeningForNativeValueUpdates();\n    }\n  }\n\n  _startListeningToNativeValueUpdates() {\n    if (this.__nativeAnimatedValueListener) {\n      return;\n    }\n\n    NativeAnimatedAPI.startListeningToAnimatedNodeValue(this.__getNativeTag());\n    this.__nativeAnimatedValueListener = NativeAnimatedHelper.nativeEventEmitter.addListener(\n      'onAnimatedValueUpdate',\n      (data) => {\n        if (data.tag !== this.__getNativeTag()) {\n          return;\n        }\n        this._updateValue(data.value, false /* flush */);\n      }\n    );\n  }\n\n  _stopListeningForNativeValueUpdates() {\n    if (!this.__nativeAnimatedValueListener) {\n      return;\n    }\n\n    this.__nativeAnimatedValueListener.remove();\n    this.__nativeAnimatedValueListener = null;\n    NativeAnimatedAPI.stopListeningToAnimatedNodeValue(this.__getNativeTag());\n  }\n\n  /**\n   * Stops any running animation or tracking.  `callback` is invoked with the\n   * final value after stopping the animation, which is useful for updating\n   * state to match the animation position with layout.\n   */\n  stopAnimation(callback?: ?(value: number) => void): void {\n    this.stopTracking();\n    this._animation && this._animation.stop();\n    this._animation = null;\n    callback && callback(this.__getValue());\n  }\n\n  /**\n  * Stops any animation and resets the value to its original\n  */\n  resetAnimation(callback?: ?(value: number) => void): void {\n    this.stopAnimation(callback);\n    this._value = this._startingValue;\n  }\n\n  /**\n   * Interpolates the value before updating the property, e.g. mapping 0-1 to\n   * 0-10.\n   */\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  /**\n   * Typically only used internally, but could be used by a custom Animation\n   * class.\n   */\n  animate(animation: Animation, callback: ?EndCallback): void {\n    var handle = null;\n    if (animation.__isInteraction) {\n      handle = InteractionManager.createInteractionHandle();\n    }\n    var previousAnimation = this._animation;\n    this._animation && this._animation.stop();\n    this._animation = animation;\n    animation.start(\n      this._value,\n      (value) => {\n        // Natively driven animations will never call into that callback, therefore we can always\n        // pass flush = true to allow the updated value to propagate to native with setNativeProps\n        this._updateValue(value, true /* flush */);\n      },\n      (result) => {\n        this._animation = null;\n        if (handle !== null) {\n          InteractionManager.clearInteractionHandle(handle);\n        }\n        callback && callback(result);\n      },\n      previousAnimation,\n      this\n    );\n  }\n\n  /**\n   * Typically only used internally.\n   */\n  stopTracking(): void {\n    this._tracking && this._tracking.__detach();\n    this._tracking = null;\n  }\n\n  /**\n   * Typically only used internally.\n   */\n  track(tracking: Animated): void {\n    this.stopTracking();\n    this._tracking = tracking;\n  }\n\n  _updateValue(value: number, flush: bool): void {\n    this._value = value;\n    if (flush) {\n      _flush(this);\n    }\n    for (var key in this._listeners) {\n      this._listeners[key]({value: this.__getValue()});\n    }\n  }\n\n  __getNativeConfig(): Object {\n    return {\n      type: 'value',\n      value: this._value,\n      offset: this._offset,\n    };\n  }\n}\n\ntype ValueXYListenerCallback = (value: {x: number, y: number}) => void;\n\n/**\n * 2D Value for driving 2D animations, such as pan gestures.  Almost identical\n * API to normal `Animated.Value`, but multiplexed.  Contains two regular\n * `Animated.Value`s under the hood.\n *\n * #### Example\n *\n *```javascript\n *  class DraggableView extends React.Component {\n *    constructor(props) {\n *      super(props);\n *      this.state = {\n *        pan: new Animated.ValueXY(), // inits to zero\n *      };\n *      this.state.panResponder = PanResponder.create({\n *        onStartShouldSetPanResponder: () => true,\n *        onPanResponderMove: Animated.event([null, {\n *          dx: this.state.pan.x, // x,y are Animated.Value\n *          dy: this.state.pan.y,\n *        }]),\n *        onPanResponderRelease: () => {\n *          Animated.spring(\n *            this.state.pan,         // Auto-multiplexed\n *            {toValue: {x: 0, y: 0}} // Back to zero\n *          ).start();\n *        },\n *      });\n *    }\n *    render() {\n *      return (\n *        <Animated.View\n *          {...this.state.panResponder.panHandlers}\n *          style={this.state.pan.getLayout()}>\n *          {this.props.children}\n *        </Animated.View>\n *      );\n *    }\n *  }\n *```\n */\nclass AnimatedValueXY extends AnimatedWithChildren {\n  x: AnimatedValue;\n  y: AnimatedValue;\n  _listeners: {[key: string]: {x: string, y: string}};\n\n  constructor(valueIn?: ?{x: number | AnimatedValue, y: number | AnimatedValue}) {\n    super();\n    var value: any = valueIn || {x: 0, y: 0};  // @flowfixme: shouldn't need `: any`\n    if (typeof value.x === 'number' && typeof value.y === 'number') {\n      this.x = new AnimatedValue(value.x);\n      this.y = new AnimatedValue(value.y);\n    } else {\n      invariant(\n        value.x instanceof AnimatedValue &&\n        value.y instanceof AnimatedValue,\n        'AnimatedValueXY must be initalized with an object of numbers or ' +\n        'AnimatedValues.'\n      );\n      this.x = value.x;\n      this.y = value.y;\n    }\n    this._listeners = {};\n  }\n\n  setValue(value: {x: number, y: number}) {\n    this.x.setValue(value.x);\n    this.y.setValue(value.y);\n  }\n\n  setOffset(offset: {x: number, y: number}) {\n    this.x.setOffset(offset.x);\n    this.y.setOffset(offset.y);\n  }\n\n  flattenOffset(): void {\n    this.x.flattenOffset();\n    this.y.flattenOffset();\n  }\n\n  extractOffset(): void {\n    this.x.extractOffset();\n    this.y.extractOffset();\n  }\n\n  __getValue(): {x: number, y: number} {\n    return {\n      x: this.x.__getValue(),\n      y: this.y.__getValue(),\n    };\n  }\n\n  resetAnimation(callback?: (value: {x: number, y: number}) => void): void {\n    this.x.resetAnimation();\n    this.y.resetAnimation();\n    callback && callback(this.__getValue());\n  }\n\n  stopAnimation(callback?: (value: {x: number, y: number}) => void): void {\n    this.x.stopAnimation();\n    this.y.stopAnimation();\n    callback && callback(this.__getValue());\n  }\n\n  addListener(callback: ValueXYListenerCallback): string {\n    var id = String(_uniqueId++);\n    var jointCallback = ({value: number}) => {\n      callback(this.__getValue());\n    };\n    this._listeners[id] = {\n      x: this.x.addListener(jointCallback),\n      y: this.y.addListener(jointCallback),\n    };\n    return id;\n  }\n\n  removeListener(id: string): void {\n    this.x.removeListener(this._listeners[id].x);\n    this.y.removeListener(this._listeners[id].y);\n    delete this._listeners[id];\n  }\n\n  removeAllListeners(): void {\n    this.x.removeAllListeners();\n    this.y.removeAllListeners();\n    this._listeners = {};\n  }\n\n  /**\n   * Converts `{x, y}` into `{left, top}` for use in style, e.g.\n   *\n   *```javascript\n   *  style={this.state.anim.getLayout()}\n   *```\n   */\n  getLayout(): {[key: string]: AnimatedValue} {\n    return {\n      left: this.x,\n      top: this.y,\n    };\n  }\n\n  /**\n   * Converts `{x, y}` into a useable translation transform, e.g.\n   *\n   *```javascript\n   *  style={{\n   *    transform: this.state.anim.getTranslateTransform()\n   *  }}\n   *```\n   */\n  getTranslateTransform(): Array<{[key: string]: AnimatedValue}> {\n    return [\n      {translateX: this.x},\n      {translateY: this.y}\n    ];\n  }\n}\n\nclass AnimatedInterpolation extends AnimatedWithChildren {\n  _parent: Animated;\n  _config: InterpolationConfigType;\n  _interpolation: (input: number) => number | string;\n\n  constructor(parent: Animated, config: InterpolationConfigType) {\n    super();\n    this._parent = parent;\n    this._config = config;\n    this._interpolation = Interpolation.create(config);\n  }\n\n  __getValue(): number | string {\n    var parentValue: number = this._parent.__getValue();\n    invariant(\n      typeof parentValue === 'number',\n      'Cannot interpolate an input which is not a number.'\n    );\n    return this._interpolation(parentValue);\n  }\n\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  __attach(): void {\n    this._parent.__addChild(this);\n  }\n\n  __detach(): void {\n    this._parent.__removeChild(this);\n    super.__detach();\n  }\n\n  __transformDataType(range: Array<any>) {\n    // Change the string array type to number array\n    // So we can reuse the same logic in iOS and Android platform\n    return range.map(function (value) {\n      if (typeof value !== 'string') {\n        return value;\n      }\n      if (/deg$/.test(value)) {\n        const degrees = parseFloat(value) || 0;\n        const radians = degrees * Math.PI / 180.0;\n        return radians;\n      } else {\n        // Assume radians\n        return parseFloat(value) || 0;\n      }\n    });\n  }\n\n  __getNativeConfig(): any {\n    if (__DEV__) {\n      NativeAnimatedHelper.validateInterpolation(this._config);\n    }\n\n    return {\n      inputRange: this._config.inputRange,\n      // Only the `outputRange` can contain strings so we don't need to tranform `inputRange` here\n      outputRange: this.__transformDataType(this._config.outputRange),\n      extrapolateLeft: this._config.extrapolateLeft || this._config.extrapolate || 'extend',\n      extrapolateRight: this._config.extrapolateRight || this._config.extrapolate || 'extend',\n      type: 'interpolation',\n    };\n  }\n}\n\nclass AnimatedAddition extends AnimatedWithChildren {\n  _a: Animated;\n  _b: Animated;\n\n  constructor(a: Animated | number, b: Animated | number) {\n    super();\n    this._a = typeof a === 'number' ? new AnimatedValue(a) : a;\n    this._b = typeof b === 'number' ? new AnimatedValue(b) : b;\n  }\n\n  __makeNative() {\n    this._a.__makeNative();\n    this._b.__makeNative();\n    super.__makeNative();\n  }\n\n  __getValue(): number {\n    return this._a.__getValue() + this._b.__getValue();\n  }\n\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  __attach(): void {\n    this._a.__addChild(this);\n    this._b.__addChild(this);\n  }\n\n  __detach(): void {\n    this._a.__removeChild(this);\n    this._b.__removeChild(this);\n    super.__detach();\n  }\n\n  __getNativeConfig(): any {\n    return {\n      type: 'addition',\n      input: [this._a.__getNativeTag(), this._b.__getNativeTag()],\n    };\n  }\n}\n\nclass AnimatedDivision extends AnimatedWithChildren {\n  _a: Animated;\n  _b: Animated;\n\n  constructor(a: Animated | number, b: Animated | number) {\n    super();\n    this._a = typeof a === 'number' ? new AnimatedValue(a) : a;\n    this._b = typeof b === 'number' ? new AnimatedValue(b) : b;\n  }\n\n  __makeNative() {\n    this._a.__makeNative();\n    this._b.__makeNative();\n    super.__makeNative();\n  }\n\n  __getValue(): number {\n    const a = this._a.__getValue();\n    const b = this._b.__getValue();\n    if (b === 0) {\n      console.error('Detected division by zero in AnimatedDivision');\n    }\n    return a / b;\n  }\n\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  __attach(): void {\n    this._a.__addChild(this);\n    this._b.__addChild(this);\n  }\n\n  __detach(): void {\n    this._a.__removeChild(this);\n    this._b.__removeChild(this);\n    super.__detach();\n  }\n\n  __getNativeConfig(): any {\n    return {\n      type: 'division',\n      input: [this._a.__getNativeTag(), this._b.__getNativeTag()],\n    };\n  }\n}\n\nclass AnimatedMultiplication extends AnimatedWithChildren {\n  _a: Animated;\n  _b: Animated;\n\n  constructor(a: Animated | number, b: Animated | number) {\n    super();\n    this._a = typeof a === 'number' ? new AnimatedValue(a) : a;\n    this._b = typeof b === 'number' ? new AnimatedValue(b) : b;\n  }\n\n  __makeNative() {\n    this._a.__makeNative();\n    this._b.__makeNative();\n    super.__makeNative();\n  }\n\n  __getValue(): number {\n    return this._a.__getValue() * this._b.__getValue();\n  }\n\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  __attach(): void {\n    this._a.__addChild(this);\n    this._b.__addChild(this);\n  }\n\n  __detach(): void {\n    this._a.__removeChild(this);\n    this._b.__removeChild(this);\n    super.__detach();\n  }\n\n  __getNativeConfig(): any {\n    return {\n      type: 'multiplication',\n      input: [this._a.__getNativeTag(), this._b.__getNativeTag()],\n    };\n  }\n}\n\nclass AnimatedModulo extends AnimatedWithChildren {\n  _a: Animated;\n  _modulus: number;\n\n  constructor(a: Animated, modulus: number) {\n    super();\n    this._a = a;\n    this._modulus = modulus;\n  }\n\n  __makeNative() {\n    this._a.__makeNative();\n    super.__makeNative();\n  }\n\n  __getValue(): number {\n    return (this._a.__getValue() % this._modulus + this._modulus) % this._modulus;\n  }\n\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  __attach(): void {\n    this._a.__addChild(this);\n  }\n\n  __detach(): void {\n    this._a.__removeChild(this);\n    super.__detach();\n  }\n\n  __getNativeConfig(): any {\n    return {\n      type: 'modulus',\n      input: this._a.__getNativeTag(),\n      modulus: this._modulus,\n    };\n  }\n}\n\nclass AnimatedDiffClamp extends AnimatedWithChildren {\n  _a: Animated;\n  _min: number;\n  _max: number;\n  _value: number;\n  _lastValue: number;\n\n  constructor(a: Animated, min: number, max: number) {\n    super();\n\n    this._a = a;\n    this._min = min;\n    this._max = max;\n    this._value = this._lastValue = this._a.__getValue();\n  }\n\n  __makeNative() {\n    this._a.__makeNative();\n    super.__makeNative();\n  }\n\n  interpolate(config: InterpolationConfigType): AnimatedInterpolation {\n    return new AnimatedInterpolation(this, config);\n  }\n\n  __getValue(): number {\n    const value = this._a.__getValue();\n    const diff = value - this._lastValue;\n    this._lastValue = value;\n    this._value = Math.min(Math.max(this._value + diff, this._min), this._max);\n    return this._value;\n  }\n\n  __attach(): void {\n    this._a.__addChild(this);\n  }\n\n  __detach(): void {\n    this._a.__removeChild(this);\n    super.__detach();\n  }\n\n  __getNativeConfig(): any {\n    return {\n      type: 'diffclamp',\n      input: this._a.__getNativeTag(),\n      min: this._min,\n      max: this._max,\n    };\n  }\n}\n\nclass AnimatedTransform extends AnimatedWithChildren {\n  _transforms: Array<Object>;\n\n  constructor(transforms: Array<Object>) {\n    super();\n    this._transforms = transforms;\n  }\n\n  __makeNative() {\n    super.__makeNative();\n    this._transforms.forEach(transform => {\n      for (var key in transform) {\n        var value = transform[key];\n        if (value instanceof Animated) {\n          value.__makeNative();\n        }\n      }\n    });\n  }\n\n  __getValue(): Array<Object> {\n    return this._transforms.map(transform => {\n      var result = {};\n      for (var key in transform) {\n        var value = transform[key];\n        if (value instanceof Animated) {\n          result[key] = value.__getValue();\n        } else {\n          result[key] = value;\n        }\n      }\n      return result;\n    });\n  }\n\n  __getAnimatedValue(): Array<Object> {\n    return this._transforms.map(transform => {\n      var result = {};\n      for (var key in transform) {\n        var value = transform[key];\n        if (value instanceof Animated) {\n          result[key] = value.__getAnimatedValue();\n        } else {\n          // All transform components needed to recompose matrix\n          result[key] = value;\n        }\n      }\n      return result;\n    });\n  }\n\n  __attach(): void {\n    this._transforms.forEach(transform => {\n      for (var key in transform) {\n        var value = transform[key];\n        if (value instanceof Animated) {\n          value.__addChild(this);\n        }\n      }\n    });\n  }\n\n  __detach(): void {\n    this._transforms.forEach(transform => {\n      for (var key in transform) {\n        var value = transform[key];\n        if (value instanceof Animated) {\n          value.__removeChild(this);\n        }\n      }\n    });\n    super.__detach();\n  }\n\n  __getNativeConfig(): any {\n    var transConfigs = [];\n\n    this._transforms.forEach(transform => {\n      for (var key in transform) {\n        var value = transform[key];\n        if (value instanceof Animated) {\n          transConfigs.push({\n            type: 'animated',\n            property: key,\n            nodeTag: value.__getNativeTag(),\n          });\n        } else {\n          transConfigs.push({\n            type: 'static',\n            property: key,\n            value,\n          });\n        }\n      }\n    });\n\n    NativeAnimatedHelper.validateTransform(transConfigs);\n    return {\n      type: 'transform',\n      transforms: transConfigs,\n    };\n  }\n}\n\nclass AnimatedStyle extends AnimatedWithChildren {\n  _style: Object;\n\n  constructor(style: any) {\n    super();\n    style = flattenStyle(style) || {};\n    if (style.transform) {\n      style = {\n        ...style,\n        transform: new AnimatedTransform(style.transform),\n      };\n    }\n    this._style = style;\n  }\n\n  // Recursively get values for nested styles (like iOS's shadowOffset)\n  __walkStyleAndGetValues(style) {\n    const updatedStyle = {};\n    for (const key in style) {\n      const value = style[key];\n      if (value instanceof Animated) {\n        if (!value.__isNative) {\n          // We cannot use value of natively driven nodes this way as the value we have access from\n          // JS may not be up to date.\n          updatedStyle[key] = value.__getValue();\n        }\n      } else if (value && !Array.isArray(value) && typeof value === 'object') {\n        // Support animating nested values (for example: shadowOffset.height)\n        updatedStyle[key] = this.__walkStyleAndGetValues(value);\n      } else {\n        updatedStyle[key] = value;\n      }\n    }\n    return updatedStyle;\n  }\n\n  __getValue(): Object {\n    return this.__walkStyleAndGetValues(this._style);\n  }\n\n  // Recursively get animated values for nested styles (like iOS's shadowOffset)\n  __walkStyleAndGetAnimatedValues(style) {\n    const updatedStyle = {};\n    for (const key in style) {\n      const value = style[key];\n      if (value instanceof Animated) {\n        updatedStyle[key] = value.__getAnimatedValue();\n      } else if (value && !Array.isArray(value) && typeof value === 'object') {\n        // Support animating nested values (for example: shadowOffset.height)\n        updatedStyle[key] = this.__walkStyleAndGetAnimatedValues(value);\n      }\n    }\n    return updatedStyle;\n  }\n\n  __getAnimatedValue(): Object {\n    return this.__walkStyleAndGetAnimatedValues(this._style);\n  }\n\n  __attach(): void {\n    for (var key in this._style) {\n      var value = this._style[key];\n      if (value instanceof Animated) {\n        value.__addChild(this);\n      }\n    }\n  }\n\n  __detach(): void {\n    for (var key in this._style) {\n      var value = this._style[key];\n      if (value instanceof Animated) {\n        value.__removeChild(this);\n      }\n    }\n    super.__detach();\n  }\n\n  __makeNative() {\n    super.__makeNative();\n    for (var key in this._style) {\n      var value = this._style[key];\n      if (value instanceof Animated) {\n        value.__makeNative();\n      }\n    }\n  }\n\n  __getNativeConfig(): Object {\n    var styleConfig = {};\n    for (const styleKey in this._style) {\n      if (this._style[styleKey] instanceof Animated) {\n        styleConfig[styleKey] = this._style[styleKey].__getNativeTag();\n      }\n      // Non-animated styles are set using `setNativeProps`, no need\n      // to pass those as a part of the node config\n    }\n    NativeAnimatedHelper.validateStyles(styleConfig);\n    return {\n      type: 'style',\n      style: styleConfig,\n    };\n  }\n}\n\nclass AnimatedProps extends Animated {\n  _props: Object;\n  _animatedView: any;\n  _callback: () => void;\n\n  constructor(\n    props: Object,\n    callback: () => void,\n  ) {\n    super();\n    if (props.style) {\n      props = {\n        ...props,\n        style: new AnimatedStyle(props.style),\n      };\n    }\n    this._props = props;\n    this._callback = callback;\n    this.__attach();\n  }\n\n  __getValue(): Object {\n    var props = {};\n    for (var key in this._props) {\n      var value = this._props[key];\n      if (value instanceof Animated) {\n        if (!value.__isNative || value instanceof AnimatedStyle) {\n          // We cannot use value of natively driven nodes this way as the value we have access from\n          // JS may not be up to date.\n          props[key] = value.__getValue();\n        }\n      } else if (value instanceof AnimatedEvent) {\n        props[key] = value.__getHandler();\n      } else {\n        props[key] = value;\n      }\n    }\n    return props;\n  }\n\n  __getAnimatedValue(): Object {\n    var props = {};\n    for (var key in this._props) {\n      var value = this._props[key];\n      if (value instanceof Animated) {\n        props[key] = value.__getAnimatedValue();\n      }\n    }\n    return props;\n  }\n\n  __attach(): void {\n    for (var key in this._props) {\n      var value = this._props[key];\n      if (value instanceof Animated) {\n        value.__addChild(this);\n      }\n    }\n  }\n\n  __detach(): void {\n    if (this.__isNative && this._animatedView) {\n      this.__disconnectAnimatedView();\n    }\n    for (var key in this._props) {\n      var value = this._props[key];\n      if (value instanceof Animated) {\n        value.__removeChild(this);\n      }\n    }\n    super.__detach();\n  }\n\n  update(): void {\n    this._callback();\n  }\n\n  __makeNative(): void {\n    if (!this.__isNative) {\n      this.__isNative = true;\n      for (var key in this._props) {\n        var value = this._props[key];\n        if (value instanceof Animated) {\n          value.__makeNative();\n        }\n      }\n      if (this._animatedView) {\n        this.__connectAnimatedView();\n      }\n    }\n  }\n\n  setNativeView(animatedView: any): void {\n    if (this._animatedView === animatedView) {\n      return;\n    }\n    this._animatedView = animatedView;\n    if (this.__isNative) {\n      this.__connectAnimatedView();\n    }\n  }\n\n  __connectAnimatedView(): void {\n    invariant(this.__isNative, 'Expected node to be marked as \"native\"');\n    var nativeViewTag: ?number = ReactNative.findNodeHandle(this._animatedView);\n    invariant(nativeViewTag != null, 'Unable to locate attached view in the native tree');\n    NativeAnimatedAPI.connectAnimatedNodeToView(this.__getNativeTag(), nativeViewTag);\n  }\n\n  __disconnectAnimatedView(): void {\n    invariant(this.__isNative, 'Expected node to be marked as \"native\"');\n    var nativeViewTag: ?number = ReactNative.findNodeHandle(this._animatedView);\n    invariant(nativeViewTag != null, 'Unable to locate attached view in the native tree');\n    NativeAnimatedAPI.disconnectAnimatedNodeFromView(this.__getNativeTag(), nativeViewTag);\n  }\n\n  __getNativeConfig(): Object {\n    var propsConfig = {};\n    for (const propKey in this._props) {\n      var value = this._props[propKey];\n      if (value instanceof Animated) {\n        propsConfig[propKey] = value.__getNativeTag();\n      }\n    }\n    return {\n      type: 'props',\n      props: propsConfig,\n    };\n  }\n}\n\nfunction createAnimatedComponent(Component: any): any {\n  class AnimatedComponent extends React.Component {\n    _component: any;\n    _prevComponent: any;\n    _propsAnimated: AnimatedProps;\n    _eventDetachers: Array<Function> = [];\n    _setComponentRef: Function;\n\n    constructor(props: Object) {\n      super(props);\n      this._setComponentRef = this._setComponentRef.bind(this);\n    }\n\n    componentWillUnmount() {\n      this._propsAnimated && this._propsAnimated.__detach();\n      this._detachNativeEvents();\n    }\n\n    setNativeProps(props) {\n      this._component.setNativeProps(props);\n    }\n\n    componentWillMount() {\n      this._attachProps(this.props);\n    }\n\n    componentDidMount() {\n      this._propsAnimated.setNativeView(this._component);\n      this._attachNativeEvents();\n    }\n\n    _attachNativeEvents() {\n      // Make sure to get the scrollable node for components that implement\n      // `ScrollResponder.Mixin`.\n      const scrollableNode = this._component.getScrollableNode ?\n        this._component.getScrollableNode() :\n        this._component;\n\n      for (const key in this.props) {\n        const prop = this.props[key];\n        if (prop instanceof AnimatedEvent && prop.__isNative) {\n           prop.__attach(scrollableNode, key);\n           this._eventDetachers.push(() => prop.__detach(scrollableNode, key));\n        }\n      }\n    }\n\n    _detachNativeEvents() {\n      this._eventDetachers.forEach(remove => remove());\n      this._eventDetachers = [];\n    }\n\n    _attachProps(nextProps) {\n      var oldPropsAnimated = this._propsAnimated;\n\n      // The system is best designed when setNativeProps is implemented. It is\n      // able to avoid re-rendering and directly set the attributes that\n      // changed. However, setNativeProps can only be implemented on leaf\n      // native components. If you want to animate a composite component, you\n      // need to re-render it. In this case, we have a fallback that uses\n      // forceUpdate.\n      var callback = () => {\n        if (this._component.setNativeProps) {\n          if (!this._propsAnimated.__isNative) {\n            this._component.setNativeProps(\n              this._propsAnimated.__getAnimatedValue()\n            );\n          } else {\n            throw new Error('Attempting to run JS driven animation on animated '\n              + 'node that has been moved to \"native\" earlier by starting an '\n              + 'animation with `useNativeDriver: true`');\n          }\n        } else {\n          this.forceUpdate();\n        }\n      };\n\n      this._propsAnimated = new AnimatedProps(\n        nextProps,\n        callback,\n      );\n\n      // When you call detach, it removes the element from the parent list\n      // of children. If it goes to 0, then the parent also detaches itself\n      // and so on.\n      // An optimization is to attach the new elements and THEN detach the old\n      // ones instead of detaching and THEN attaching.\n      // This way the intermediate state isn't to go to 0 and trigger\n      // this expensive recursive detaching to then re-attach everything on\n      // the very next operation.\n      oldPropsAnimated && oldPropsAnimated.__detach();\n    }\n\n    componentWillReceiveProps(newProps) {\n      this._attachProps(newProps);\n    }\n\n    componentDidUpdate(prevProps) {\n      if (this._component !== this._prevComponent) {\n        this._propsAnimated.setNativeView(this._component);\n      }\n      if (this._component !== this._prevComponent || prevProps !== this.props) {\n        this._detachNativeEvents();\n        this._attachNativeEvents();\n      }\n    }\n\n    render() {\n      const props = this._propsAnimated.__getValue();\n      return (\n        <Component\n          {...props}\n          ref={this._setComponentRef}\n          // The native driver updates views directly through the UI thread so we\n          // have to make sure the view doesn't get optimized away because it cannot\n          // go through the NativeViewHierachyManager since it operates on the shadow\n          // thread.\n          collapsable={this._propsAnimated.__isNative ? false : props.collapsable}\n        />\n      );\n    }\n\n    _setComponentRef(c) {\n      this._prevComponent = this._component;\n      this._component = c;\n    }\n\n    // A third party library can use getNode()\n    // to get the node reference of the decorated component\n    getNode () {\n      return this._component;\n    }\n  }\n\n  // ReactNative `View.propTypes` have been deprecated in favor of\n  // `ViewPropTypes`. In their place a temporary getter has been added with a\n  // deprecated warning message. Avoid triggering that warning here by using\n  // temporary workaround, __propTypesSecretDontUseThesePlease.\n  // TODO (bvaughn) Revert this particular change any time after April 1\n  var propTypes =\n    Component.__propTypesSecretDontUseThesePlease ||\n    Component.propTypes;\n\n  AnimatedComponent.propTypes = {\n    style: function(props, propName, componentName) {\n      if (!propTypes) {\n        return;\n      }\n\n      for (var key in ViewStylePropTypes) {\n        if (!propTypes[key] && props[key] !== undefined) {\n          console.warn(\n            'You are setting the style `{ ' + key + ': ... }` as a prop. You ' +\n            'should nest it in a style object. ' +\n            'E.g. `{ style: { ' + key + ': ... } }`'\n          );\n        }\n      }\n    },\n  };\n\n  return AnimatedComponent;\n}\n\nclass AnimatedTracking extends Animated {\n  _value: AnimatedValue;\n  _parent: Animated;\n  _callback: ?EndCallback;\n  _animationConfig: Object;\n  _animationClass: any;\n\n  constructor(\n    value: AnimatedValue,\n    parent: Animated,\n    animationClass: any,\n    animationConfig: Object,\n    callback?: ?EndCallback,\n  ) {\n    super();\n    this._value = value;\n    this._parent = parent;\n    this._animationClass = animationClass;\n    this._animationConfig = animationConfig;\n    this._callback = callback;\n    this.__attach();\n  }\n\n  __getValue(): Object {\n    return this._parent.__getValue();\n  }\n\n  __attach(): void {\n    this._parent.__addChild(this);\n  }\n\n  __detach(): void {\n    this._parent.__removeChild(this);\n    super.__detach();\n  }\n\n  update(): void {\n    this._value.animate(new this._animationClass({\n      ...this._animationConfig,\n      toValue: (this._animationConfig.toValue: any).__getValue(),\n    }), this._callback);\n  }\n}\n\ntype CompositeAnimation = {\n  start: (callback?: ?EndCallback) => void,\n  stop: () => void,\n  reset: () => void,\n  _startNativeLoop: (iterations?: number) => void,\n  _isUsingNativeDriver: () => boolean,\n};\n\nvar add = function(\n  a: Animated | number,\n  b: Animated | number,\n): AnimatedAddition {\n  return new AnimatedAddition(a, b);\n};\n\nvar divide = function(\n  a: Animated | number,\n  b: Animated | number,\n): AnimatedDivision {\n  return new AnimatedDivision(a, b);\n};\n\nvar multiply = function(\n  a: Animated | number,\n  b: Animated | number,\n): AnimatedMultiplication {\n  return new AnimatedMultiplication(a, b);\n};\n\nvar modulo = function(\n  a: Animated,\n  modulus: number\n): AnimatedModulo {\n  return new AnimatedModulo(a, modulus);\n};\n\nvar diffClamp = function(\n  a: Animated,\n  min: number,\n  max: number,\n): AnimatedDiffClamp {\n  return new AnimatedDiffClamp(a, min, max);\n};\n\nconst _combineCallbacks = function(callback: ?EndCallback, config : AnimationConfig) {\n  if (callback && config.onComplete) {\n    return (...args) => {\n      config.onComplete && config.onComplete(...args);\n      callback && callback(...args);\n    };\n  } else {\n    return callback || config.onComplete;\n  }\n};\n\nvar maybeVectorAnim = function(\n  value: AnimatedValue | AnimatedValueXY,\n  config: Object,\n  anim: (value: AnimatedValue, config: Object) => CompositeAnimation\n): ?CompositeAnimation {\n  if (value instanceof AnimatedValueXY) {\n    var configX = {...config};\n    var configY = {...config};\n    for (var key in config) {\n      var {x, y} = config[key];\n      if (x !== undefined && y !== undefined) {\n        configX[key] = x;\n        configY[key] = y;\n      }\n    }\n    var aX = anim((value: AnimatedValueXY).x, configX);\n    var aY = anim((value: AnimatedValueXY).y, configY);\n    // We use `stopTogether: false` here because otherwise tracking will break\n    // because the second animation will get stopped before it can update.\n    return parallel([aX, aY], {stopTogether: false});\n  }\n  return null;\n};\n\nvar spring = function(\n  value: AnimatedValue | AnimatedValueXY,\n  config: SpringAnimationConfig,\n): CompositeAnimation {\n  var start = function(\n    animatedValue: AnimatedValue | AnimatedValueXY,\n    configuration: SpringAnimationConfig,\n    callback?: ?EndCallback): void {\n      callback = _combineCallbacks(callback, configuration);\n      var singleValue: any = animatedValue;\n      var singleConfig: any = configuration;\n      singleValue.stopTracking();\n      if (configuration.toValue instanceof Animated) {\n        singleValue.track(new AnimatedTracking(\n          singleValue,\n          configuration.toValue,\n          SpringAnimation,\n          singleConfig,\n          callback\n        ));\n      } else {\n        singleValue.animate(new SpringAnimation(singleConfig), callback);\n      }\n  };\n  return maybeVectorAnim(value, config, spring) || {\n    start: function(callback?: ?EndCallback): void {\n      start(value, config, callback);\n    },\n\n    stop: function(): void {\n      value.stopAnimation();\n    },\n\n    reset: function(): void {\n      value.resetAnimation();\n    },\n\n    _startNativeLoop: function(iterations?: number): void {\n      var singleConfig = { ...config, iterations };\n      start(value, singleConfig);\n    },\n\n    _isUsingNativeDriver: function(): boolean {\n      return config.useNativeDriver || false;\n    }\n  };\n};\n\nvar timing = function(\n  value: AnimatedValue | AnimatedValueXY,\n  config: TimingAnimationConfig,\n): CompositeAnimation {\n  var start = function(\n    animatedValue: AnimatedValue | AnimatedValueXY,\n    configuration: TimingAnimationConfig,\n    callback?: ?EndCallback): void {\n      callback = _combineCallbacks(callback, configuration);\n      var singleValue: any = animatedValue;\n      var singleConfig: any = configuration;\n      singleValue.stopTracking();\n      if (configuration.toValue instanceof Animated) {\n        singleValue.track(new AnimatedTracking(\n          singleValue,\n          configuration.toValue,\n          TimingAnimation,\n          singleConfig,\n          callback\n        ));\n      } else {\n        singleValue.animate(new TimingAnimation(singleConfig), callback);\n      }\n  };\n\n  return maybeVectorAnim(value, config, timing) || {\n    start: function(callback?: ?EndCallback): void {\n      start(value, config, callback);\n    },\n\n    stop: function(): void {\n      value.stopAnimation();\n    },\n\n    reset: function(): void {\n      value.resetAnimation();\n    },\n\n    _startNativeLoop: function(iterations?: number): void {\n      var singleConfig = { ...config, iterations };\n      start(value, singleConfig);\n    },\n\n    _isUsingNativeDriver: function(): boolean {\n      return config.useNativeDriver || false;\n    }\n  };\n};\n\nvar decay = function(\n  value: AnimatedValue | AnimatedValueXY,\n  config: DecayAnimationConfig,\n): CompositeAnimation {\n  var start = function(\n    animatedValue: AnimatedValue | AnimatedValueXY,\n    configuration: DecayAnimationConfig,\n    callback?: ?EndCallback): void {\n      callback = _combineCallbacks(callback, configuration);\n      var singleValue: any = animatedValue;\n      var singleConfig: any = configuration;\n      singleValue.stopTracking();\n      singleValue.animate(new DecayAnimation(singleConfig), callback);\n  };\n\n  return maybeVectorAnim(value, config, decay) || {\n    start: function(callback?: ?EndCallback): void {\n      start(value, config, callback);\n    },\n\n    stop: function(): void {\n      value.stopAnimation();\n    },\n\n    reset: function(): void {\n      value.resetAnimation();\n    },\n\n    _startNativeLoop: function(iterations?: number): void {\n      var singleConfig = { ...config, iterations };\n      start(value, singleConfig);\n    },\n\n    _isUsingNativeDriver: function(): boolean {\n      return config.useNativeDriver || false;\n    }\n  };\n};\n\nvar sequence = function(\n  animations: Array<CompositeAnimation>,\n): CompositeAnimation {\n  var current = 0;\n  return {\n    start: function(callback?: ?EndCallback) {\n      var onComplete = function(result) {\n        if (!result.finished) {\n          callback && callback(result);\n          return;\n        }\n\n        current++;\n\n        if (current === animations.length) {\n          callback && callback(result);\n          return;\n        }\n\n        animations[current].start(onComplete);\n      };\n\n      if (animations.length === 0) {\n        callback && callback({finished: true});\n      } else {\n        animations[current].start(onComplete);\n      }\n    },\n\n    stop: function() {\n      if (current < animations.length) {\n        animations[current].stop();\n      }\n    },\n\n    reset: function() {\n      animations.forEach((animation, idx) => {\n        if (idx <= current) {\n          animation.reset();\n        }\n      });\n      current = 0;\n    },\n\n    _startNativeLoop: function() {\n      throw new Error('Loops run using the native driver cannot contain Animated.sequence animations');\n    },\n\n    _isUsingNativeDriver: function(): boolean {\n      return false;\n    }\n  };\n};\n\ntype ParallelConfig = {\n  stopTogether?: bool, // If one is stopped, stop all.  default: true\n}\nvar parallel = function(\n  animations: Array<CompositeAnimation>,\n  config?: ?ParallelConfig,\n): CompositeAnimation {\n  var doneCount = 0;\n  // Make sure we only call stop() at most once for each animation\n  var hasEnded = {};\n  var stopTogether = !(config && config.stopTogether === false);\n\n  var result = {\n    start: function(callback?: ?EndCallback) {\n      if (doneCount === animations.length) {\n        callback && callback({finished: true});\n        return;\n      }\n\n      animations.forEach((animation, idx) => {\n        var cb = function(endResult) {\n          hasEnded[idx] = true;\n          doneCount++;\n          if (doneCount === animations.length) {\n            doneCount = 0;\n            callback && callback(endResult);\n            return;\n          }\n\n          if (!endResult.finished && stopTogether) {\n            result.stop();\n          }\n        };\n\n        if (!animation) {\n          cb({finished: true});\n        } else {\n          animation.start(cb);\n        }\n      });\n    },\n\n    stop: function(): void {\n      animations.forEach((animation, idx) => {\n        !hasEnded[idx] && animation.stop();\n        hasEnded[idx] = true;\n      });\n    },\n\n    reset: function(): void {\n      animations.forEach((animation, idx) => {\n        animation.reset();\n        hasEnded[idx] = false;\n        doneCount = 0;\n      });\n    },\n\n    _startNativeLoop: function() {\n      throw new Error('Loops run using the native driver cannot contain Animated.parallel animations');\n    },\n\n    _isUsingNativeDriver: function(): boolean {\n      return false;\n    }\n  };\n\n  return result;\n};\n\nvar delay = function(time: number): CompositeAnimation {\n  // Would be nice to make a specialized implementation\n  return timing(new AnimatedValue(0), {toValue: 0, delay: time, duration: 0});\n};\n\nvar stagger = function(\n  time: number,\n  animations: Array<CompositeAnimation>,\n): CompositeAnimation {\n  return parallel(animations.map((animation, i) => {\n    return sequence([\n      delay(time * i),\n      animation,\n    ]);\n  }));\n};\n\ntype LoopAnimationConfig = { iterations: number };\n\nvar loop = function(\n  animation: CompositeAnimation,\n  { iterations = -1 }: LoopAnimationConfig = {},\n): CompositeAnimation {\n  var isFinished = false;\n  var iterationsSoFar = 0;\n  return {\n    start: function(callback?: ?EndCallback) {\n      var restart = function(result: EndResult = {finished: true}): void {\n        if (isFinished ||\n            (iterationsSoFar === iterations) ||\n            (result.finished === false)) {\n          callback && callback(result);\n        } else {\n          iterationsSoFar++;\n          animation.reset();\n          animation.start(restart);\n        }\n      };\n      if (!animation || iterations === 0) {\n        callback && callback({finished: true});\n      } else {\n        if (animation._isUsingNativeDriver()) {\n          animation._startNativeLoop(iterations);\n        } else {\n          restart(); // Start looping recursively on the js thread\n        }\n      }\n    },\n\n    stop: function(): void {\n      isFinished = true;\n      animation.stop();\n    },\n\n    reset: function(): void {\n      iterationsSoFar = 0;\n      isFinished = false;\n      animation.reset();\n    },\n\n    _startNativeLoop: function() {\n      throw new Error('Loops run using the native driver cannot contain Animated.loop animations');\n    },\n\n    _isUsingNativeDriver: function(): boolean {\n      return animation._isUsingNativeDriver();\n    }\n  };\n};\n\ntype Mapping = {[key: string]: Mapping} | AnimatedValue;\ntype EventConfig = {\n  listener?: ?Function,\n  useNativeDriver?: bool,\n};\n\nfunction attachNativeEvent(viewRef: any, eventName: string, argMapping: Array<?Mapping>) {\n  // Find animated values in `argMapping` and create an array representing their\n  // key path inside the `nativeEvent` object. Ex.: ['contentOffset', 'x'].\n  const eventMappings = [];\n\n  const traverse = (value, path) => {\n    if (value instanceof AnimatedValue) {\n      value.__makeNative();\n\n      eventMappings.push({\n        nativeEventPath: path,\n        animatedValueTag: value.__getNativeTag(),\n      });\n    } else if (typeof value === 'object') {\n      for (const key in value) {\n        traverse(value[key], path.concat(key));\n      }\n    }\n  };\n\n  invariant(\n    argMapping[0] && argMapping[0].nativeEvent,\n    'Native driven events only support animated values contained inside `nativeEvent`.'\n  );\n\n  // Assume that the event containing `nativeEvent` is always the first argument.\n  traverse(argMapping[0].nativeEvent, []);\n\n  const viewTag = ReactNative.findNodeHandle(viewRef);\n\n  eventMappings.forEach((mapping) => {\n    NativeAnimatedAPI.addAnimatedEventToView(viewTag, eventName, mapping);\n  });\n\n  return {\n    detach() {\n      eventMappings.forEach((mapping) => {\n        NativeAnimatedAPI.removeAnimatedEventFromView(\n          viewTag,\n          eventName,\n          mapping.animatedValueTag,\n        );\n      });\n    },\n  };\n}\n\nfunction forkEvent(event: ?AnimatedEvent | ?Function, listener: Function): AnimatedEvent | Function {\n  if (!event) {\n    return listener;\n  } else if (event instanceof AnimatedEvent) {\n    event.__addListener(listener);\n    return event;\n  } else {\n    return (...args) => {\n      typeof event === 'function' && event(...args);\n      listener(...args);\n    };\n  }\n}\n\nfunction unforkEvent(event: ?AnimatedEvent | ?Function, listener: Function): void {\n  if (event && event instanceof AnimatedEvent) {\n    event.__removeListener(listener);\n  }\n}\n\nclass AnimatedEvent {\n  _argMapping: Array<?Mapping>;\n  _listeners: Array<Function> = [];\n  _callListeners: Function;\n  _attachedEvent: ?{\n    detach: () => void,\n  };\n  __isNative: bool;\n\n  constructor(\n    argMapping: Array<?Mapping>,\n    config?: EventConfig = {}\n  ) {\n    this._argMapping = argMapping;\n    if (config.listener) {\n      this.__addListener(config.listener);\n    }\n    this._callListeners = this._callListeners.bind(this);\n    this._attachedEvent = null;\n    this.__isNative = shouldUseNativeDriver(config);\n\n    if (__DEV__) {\n      this._validateMapping();\n    }\n  }\n\n  __addListener(callback: Function): void {\n    this._listeners.push(callback);\n  }\n\n  __removeListener(callback: Function): void {\n    this._listeners = this._listeners.filter((listener) => listener !== callback);\n  }\n\n  __attach(viewRef, eventName) {\n    invariant(this.__isNative, 'Only native driven events need to be attached.');\n\n    this._attachedEvent = attachNativeEvent(viewRef, eventName, this._argMapping);\n  }\n\n  __detach(viewTag, eventName) {\n    invariant(this.__isNative, 'Only native driven events need to be detached.');\n\n    this._attachedEvent && this._attachedEvent.detach();\n  }\n\n  __getHandler() {\n    if (this.__isNative) {\n      return this._callListeners;\n    }\n\n    return (...args) => {\n      const traverse = (recMapping, recEvt, key) => {\n        if (typeof recEvt === 'number' && recMapping instanceof AnimatedValue) {\n          recMapping.setValue(recEvt);\n        } else if (typeof recMapping === 'object') {\n          for (const mappingKey in recMapping) {\n            traverse(recMapping[mappingKey], recEvt[mappingKey], mappingKey);\n          }\n        }\n      };\n\n      if (!this.__isNative) {\n        this._argMapping.forEach((mapping, idx) => {\n          traverse(mapping, args[idx], 'arg' + idx);\n        });\n      }\n      this._callListeners(...args);\n    };\n  }\n\n  _callListeners(...args) {\n    this._listeners.forEach(listener => listener(...args));\n  }\n\n  _validateMapping() {\n    const traverse = (recMapping, recEvt, key) => {\n      if (typeof recEvt === 'number') {\n        invariant(\n          recMapping instanceof AnimatedValue,\n          'Bad mapping of type ' + typeof recMapping + ' for key ' + key +\n            ', event value must map to AnimatedValue'\n        );\n        return;\n      }\n      invariant(\n        typeof recMapping === 'object',\n        'Bad mapping of type ' + typeof recMapping + ' for key ' + key\n      );\n      invariant(\n        typeof recEvt === 'object',\n        'Bad event of type ' + typeof recEvt + ' for key ' + key\n      );\n      for (const mappingKey in recMapping) {\n        traverse(recMapping[mappingKey], recEvt[mappingKey], mappingKey);\n      }\n    };\n  }\n}\n\nvar event = function(\n  argMapping: Array<?Mapping>,\n  config?: EventConfig,\n): any {\n  const animatedEvent = new AnimatedEvent(argMapping, config);\n  if (animatedEvent.__isNative) {\n    return animatedEvent;\n  } else {\n    return animatedEvent.__getHandler();\n  }\n};\n\n/**\n * The `Animated` library is designed to make animations fluid, powerful, and\n * easy to build and maintain. `Animated` focuses on declarative relationships\n * between inputs and outputs, with configurable transforms in between, and\n * simple `start`/`stop` methods to control time-based animation execution.\n *\n * The simplest workflow for creating an animation is to to create an\n * `Animated.Value`, hook it up to one or more style attributes of an animated\n * component, and then drive updates via animations using `Animated.timing()`:\n *\n * ```javascript\n * Animated.timing(                            // Animate value over time\n *   this.state.fadeAnim,                      // The value to drive\n *   {\n *     toValue: 1,                             // Animate to final value of 1\n *   }\n * ).start();                                  // Start the animation\n * ```\n *\n * Refer to the [Animations](docs/animations.html#animated-api) guide to see\n * additional examples of `Animated` in action.\n *\n * ## Overview\n *\n * There are two value types you can use with `Animated`:\n *\n * - [`Animated.Value()`](docs/animated.html#value) for single values\n * - [`Animated.ValueXY()`](docs/animated.html#valuexy) for vectors\n *\n * `Animated.Value` can bind to style properties or other props, and can be\n * interpolated as well. A single `Animated.Value` can drive any number of\n * properties.\n *\n * ### Configuring animations\n *\n * `Animated` provides three types of animation types. Each animation type\n * provides a particular animation curve that controls how your values animate\n * from their initial value to the final value:\n *\n * - [`Animated.decay()`](docs/animated.html#decay) starts with an initial\n *   velocity and gradually slows to a stop.\n * - [`Animated.spring()`](docs/animated.html#spring) provides a simple\n *   spring physics model.\n * - [`Animated.timing()`](docs/animated.html#timing) animates a value over time\n *   using [easing functions](docs/easing.html).\n *\n * In most cases, you will be using `timing()`. By default, it uses a symmetric\n * easeInOut curve that conveys the gradual acceleration of an object to full\n * speed and concludes by gradually decelerating to a stop.\n *\n * ### Working with animations\n *\n * Animations are started by calling `start()` on your animation. `start()`\n * takes a completion callback that will be called when the animation is done.\n * If the animation finished running normally, the completion callback will be\n * invoked with `{finished: true}`. If the animation is done because `stop()`\n * was called on it before it could finish (e.g. because it was interrupted by a\n * gesture or another animation), then it will receive `{finished: false}`.\n *\n * ### Using the native driver\n *\n * By using the native driver, we send everything about the animation to native\n * before starting the animation, allowing native code to perform the animation\n * on the UI thread without having to go through the bridge on every frame.\n * Once the animation has started, the JS thread can be blocked without\n * affecting the animation.\n *\n * You can use the native driver by specifying `useNativeDriver: true` in your\n * animation configuration. See the\n * [Animations](docs/animations.html#using-the-native-driver) guide to learn\n * more.\n *\n * ### Animatable components\n *\n * Only animatable components can be animated. These special components do the\n * magic of binding the animated values to the properties, and do targeted\n * native updates to avoid the cost of the react render and reconciliation\n * process on every frame. They also handle cleanup on unmount so they are safe\n * by default.\n *\n * - [`createAnimatedComponent()`](docs/animated.html#createanimatedcomponent)\n *   can be used to make a component animatable.\n *\n * `Animated` exports the following animatable components using the above\n * wrapper:\n *\n * - `Animated.Image`\n * - `Animated.ScrollView`\n * - `Animated.Text`\n * - `Animated.View`\n *\n * ### Composing animations\n *\n * Animations can also be combined in complex ways using composition functions:\n *\n * - [`Animated.delay()`](docs/animated.html#delay) starts an animation after\n *   a given delay.\n * - [`Animated.parallel()`](docs/animated.html#parallel) starts a number of\n *   animations at the same time.\n * - [`Animated.sequence()`](docs/animated.html#sequence) starts the animations\n *   in order, waiting for each to complete before starting the next.\n * - [`Animated.stagger()`](docs/animated.html#stagger) starts animations in\n *   order and in parallel, but with successive delays.\n *\n * Animations can also be chained together simply by setting the `toValue` of\n * one animation to be another `Animated.Value`. See\n * [Tracking dynamic values](docs/animations.html#tracking-dynamic-values) in\n * the Animations guide.\n *\n * By default, if one animation is stopped or interrupted, then all other\n * animations in the group are also stopped.\n *\n * ### Combining animated values\n *\n * You can combine two animated values via addition, multiplication, division,\n * or modulo to make a new animated value:\n *\n * - [`Animated.add()`](docs/animated.html#add)\n * - [`Animated.divide()`](docs/animated.html#divide)\n * - [`Animated.modulo()`](docs/animated.html#modulo)\n * - [`Animated.multiply()`](docs/animated.html#multiply)\n *\n * ### Interpolation\n *\n * The `interpolate()` function allows input ranges to map to different output\n * ranges. By default, it will extrapolate the curve beyond the ranges given,\n * but you can also have it clamp the output value. It uses lineal interpolation\n * by default but also supports easing functions.\n *\n * - [`interpolate()`](docs/animated.html#interpolate)\n *\n * Read more about interpolation in the\n * [Animation](docs/animations.html#interpolation) guide.\n *\n * ### Handling gestures and other events\n *\n * Gestures, like panning or scrolling, and other events can map directly to\n * animated values using `Animated.event()`. This is done with a structured map\n * syntax so that values can be extracted from complex event objects. The first\n * level is an array to allow mapping across multiple args, and that array\n * contains nested objects.\n *\n * - [`Animated.event()`](docs/animated.html#event)\n *\n * For example, when working with horizontal scrolling gestures, you would do\n * the following in order to map `event.nativeEvent.contentOffset.x` to\n * `scrollX` (an `Animated.Value`):\n *\n * ```javascript\n *  onScroll={Animated.event(\n *    // scrollX = e.nativeEvent.contentOffset.x\n *    [{ nativeEvent: {\n *         contentOffset: {\n *           x: scrollX\n *         }\n *       }\n *     }]\n *  )}\n * ```\n *\n */\nmodule.exports = {\n  /**\n   * Standard value class for driving animations.  Typically initialized with\n   * `new Animated.Value(0);`\n   *\n   * See also [`AnimatedValue`](docs/animated.html#animatedvalue).\n   */\n  Value: AnimatedValue,\n  /**\n   * 2D value class for driving 2D animations, such as pan gestures.\n   *\n   * See also [`AnimatedValueXY`](docs/animated.html#animatedvaluexy).\n   */\n  ValueXY: AnimatedValueXY,\n  /**\n   * exported to use the Interpolation type in flow\n   *\n   * See also [`AnimatedInterpolation`](docs/animated.html#animatedinterpolation).\n   */\n  Interpolation: AnimatedInterpolation,\n\n  /**\n   * Animates a value from an initial velocity to zero based on a decay\n   * coefficient.\n   *\n   * Config is an object that may have the following options:\n   *\n   *   - `velocity`: Initial velocity.  Required.\n   *   - `deceleration`: Rate of decay.  Default 0.997.\n   *   - `useNativeDriver`: Uses the native driver when true. Default false.\n   */\n  decay,\n  /**\n   * Animates a value along a timed easing curve. The\n   * [`Easing`](docs/easing.html) module has tons of predefined curves, or you\n   * can use your own function.\n   *\n   * Config is an object that may have the following options:\n   *\n   *   - `duration`: Length of animation (milliseconds).  Default 500.\n   *   - `easing`: Easing function to define curve.\n   *     Default is `Easing.inOut(Easing.ease)`.\n   *   - `delay`: Start the animation after delay (milliseconds).  Default 0.\n   *   - `useNativeDriver`: Uses the native driver when true. Default false.\n   */\n  timing,\n  /**\n   * Spring animation based on Rebound and\n   * [Origami](https://facebook.github.io/origami/).  Tracks velocity state to\n   * create fluid motions as the `toValue` updates, and can be chained together.\n   *\n   * Config is an object that may have the following options. Note that you can\n   * only define bounciness/speed or tension/friction but not both:\n   *\n   *   - `friction`: Controls \"bounciness\"/overshoot.  Default 7.\n   *   - `tension`: Controls speed.  Default 40.\n   *   - `speed`: Controls speed of the animation. Default 12.\n   *   - `bounciness`: Controls bounciness. Default 8.\n   *   - `useNativeDriver`: Uses the native driver when true. Default false.\n   */\n  spring,\n\n  /**\n   * Creates a new Animated value composed from two Animated values added\n   * together.\n   */\n  add,\n\n  /**\n   * Creates a new Animated value composed by dividing the first Animated value\n   * by the second Animated value.\n   */\n  divide,\n\n  /**\n   * Creates a new Animated value composed from two Animated values multiplied\n   * together.\n   */\n  multiply,\n\n  /**\n   * Creates a new Animated value that is the (non-negative) modulo of the\n   * provided Animated value\n   */\n  modulo,\n\n  /**\n   * Create a new Animated value that is limited between 2 values. It uses the\n   * difference between the last value so even if the value is far from the bounds\n   * it will start changing when the value starts getting closer again.\n   * (`value = clamp(value + diff, min, max)`).\n   *\n   * This is useful with scroll events, for example, to show the navbar when\n   * scrolling up and to hide it when scrolling down.\n   */\n  diffClamp,\n\n  /**\n   * Starts an animation after the given delay.\n   */\n  delay,\n  /**\n   * Starts an array of animations in order, waiting for each to complete\n   * before starting the next.  If the current running animation is stopped, no\n   * following animations will be started.\n   */\n  sequence,\n  /**\n   * Starts an array of animations all at the same time.  By default, if one\n   * of the animations is stopped, they will all be stopped.  You can override\n   * this with the `stopTogether` flag.\n   */\n  parallel,\n  /**\n   * Array of animations may run in parallel (overlap), but are started in\n   * sequence with successive delays.  Nice for doing trailing effects.\n   */\n  stagger,\n  /**\n  * Loops a given animation continuously, so that each time it reaches the\n  * end, it resets and begins again from the start. Can specify number of\n  * times to loop using the key 'iterations' in the config. Will loop without\n  * blocking the UI thread if the child animation is set to 'useNativeDriver'.\n  */\n  loop,\n\n  /**\n   * Takes an array of mappings and extracts values from each arg accordingly,\n   * then calls `setValue` on the mapped outputs.  e.g.\n   *\n   *```javascript\n   *  onScroll={Animated.event(\n   *    [{nativeEvent: {contentOffset: {x: this._scrollX}}}]\n   *    {listener},          // Optional async listener\n   *  )\n   *  ...\n   *  onPanResponderMove: Animated.event([\n   *    null,                // raw event arg ignored\n   *    {dx: this._panX},    // gestureState arg\n   *  ]),\n   *```\n   *\n   * Config is an object that may have the following options:\n   *\n   *   - `listener`: Optional async listener.\n   *   - `useNativeDriver`: Uses the native driver when true. Default false.\n   */\n  event,\n\n  /**\n   * Make any React component Animatable.  Used to create `Animated.View`, etc.\n   */\n  createAnimatedComponent,\n\n  /**\n   * Imperative API to attach an animated value to an event on a view. Prefer using\n   * `Animated.event` with `useNativeDrive: true` if possible.\n   */\n  attachNativeEvent,\n\n  /**\n   * Advanced imperative API for snooping on animated events that are passed in through props. Use\n   * values directly where possible.\n   */\n  forkEvent,\n  unforkEvent,\n\n  __PropsOnlyForTests: AnimatedProps,\n};\n"]}]